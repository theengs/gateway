(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{401:function(s,t,a){s.exports=a.p+"assets/img/TheengsGateway_mqtt_explorer.beabd93e.png"},417:function(s,t,a){"use strict";a.r(t);var e=a(56),n=Object(e.a)({},(function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("h1",{attrs:{id:"use"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#use"}},[s._v("#")]),s._v(" Use")]),s._v(" "),e("h2",{attrs:{id:"launching-the-gateway"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#launching-the-gateway"}},[s._v("#")]),s._v(" Launching the gateway")]),s._v(" "),e("h3",{attrs:{id:"for-a-regular-installation"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#for-a-regular-installation"}},[s._v("#")]),s._v(" For a regular installation")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("python -m TheengsGateway -H "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"<mqtt_broker_host_ip>"')]),s._v(" -u "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"username"')]),s._v(" -p "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"password"')]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h3",{attrs:{id:"for-a-docker-container"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#for-a-docker-container"}},[s._v("#")]),s._v(" For a Docker container")]),s._v(" "),e("p",[s._v("To run it with minimum required parameters required:")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" run --rm "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    --network "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("host")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    -e "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("MQTT_HOST")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("mqtt_broker_host_ip"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    -v /var/run/dbus:/var/run/dbus "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    --name TheengsGateway "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    theengs/gateway\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br")])]),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[s._v("TIP")]),s._v(" "),e("p",[s._v("If your mqtt broker is installed on the same instance as the gateway you can use "),e("code",[s._v("localhost")]),s._v(" as the "),e("code",[s._v("<mqtt_broker_host_ip>")]),s._v(".")])]),s._v(" "),e("h3",{attrs:{id:"checking-the-data-published-by-the-gateway"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#checking-the-data-published-by-the-gateway"}},[s._v("#")]),s._v(" Checking the data published by the gateway")]),s._v(" "),e("p",[s._v("Once the command launched you should see MQTT payloads appearing on the broker. To visualize these data you have to use an "),e("a",{attrs:{href:"../prerequisites/broker"}},[s._v("MQTT client tool")]),s._v(".")]),s._v(" "),e("p",[e("img",{attrs:{src:a(401),alt:"mqtt"}})]),s._v(" "),e("p",[s._v("Example payload received:")]),s._v(" "),e("div",{staticClass:"language-json line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-json"}},[e("code",[e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),e("span",{pre:!0,attrs:{class:"token property"}},[s._v('"name"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"F35285"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),e("span",{pre:!0,attrs:{class:"token property"}},[s._v('"id"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"F3:52:85"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),e("span",{pre:!0,attrs:{class:"token property"}},[s._v('"rssi"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("-82")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),e("span",{pre:!0,attrs:{class:"token property"}},[s._v('"brand"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"BlueMaestro"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),e("span",{pre:!0,attrs:{class:"token property"}},[s._v('"model"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"TempoDisc"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),e("span",{pre:!0,attrs:{class:"token property"}},[s._v('"model_id"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"BM_V23"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),e("span",{pre:!0,attrs:{class:"token property"}},[s._v('"tempc"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("24.1")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),e("span",{pre:!0,attrs:{class:"token property"}},[s._v('"tempf"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("75.38")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),e("span",{pre:!0,attrs:{class:"token property"}},[s._v('"hum"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("104.7")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),e("span",{pre:!0,attrs:{class:"token property"}},[s._v('"dp"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("24.8")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),e("span",{pre:!0,attrs:{class:"token property"}},[s._v('"volt"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("2.56")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),e("span",{pre:!0,attrs:{class:"token property"}},[s._v('"mfr"')]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Blue Maestro Limited"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("The "),e("code",[s._v("mfr")]),s._v(" key has the company name of the manufacturer as its value in two cases:")]),s._v(" "),e("ul",[e("li",[s._v("The advertisement of the device has been successfully decoded, its manufacturer data have a company ID compliant to the Bluetooth specification, and it's no beacon (iBeacon, Microsoft Advertising Beacon).")]),s._v(" "),e("li",[s._v("The advertisement of the device can't be decoded.")])]),s._v(" "),e("p",[s._v("Note that in the latter case, we can't guarantee that the manufacturer name is correct, as many devices are not compliant to the Bluetooth specification and encode their data in the bytes where the manufacturer ID should be.")]),s._v(" "),e("h2",{attrs:{id:"details-options"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#details-options"}},[s._v("#")]),s._v(" Details options")]),s._v(" "),e("h3",{attrs:{id:"for-a-regular-installation-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#for-a-regular-installation-2"}},[s._v("#")]),s._v(" For a regular installation")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("C:"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("Users"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("1technophile"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("python -m TheengsGateway -h\nusage:    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("-h"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("-H HOST"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("-P PORT"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("-u "),e("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("USER")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("-p "),e("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("PWD")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("-pt PUB_TOPIC"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("-Lt LWT_TOPIC"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n          "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("-st SUB_TOPIC"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("-pa PUBLISH_ALL"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("-sd SCAN_DUR"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("-tb TIME_BETWEEN"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n          "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("-ll "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("DEBUG,INFO,WARNING,ERROR,CRITICAL"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("-Dt DISCOVERY_TOPIC"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("-D DISCOVERY"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("-Dh HASS_DISCOVERY"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n          "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("-Dn DISCOVERY_DEVICE_NAME"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("-Df DISCOVERY_FILTER "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("DISCOVERY_FILTER "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("."),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n          "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("-prt PRESENCE_TOPIC"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("-pr PUBLISH_PRESENCE"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n          "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("-a ADAPTER"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("-s "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("active,passive"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("-ts TIME_SYNC "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("TIME_SYNC "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("."),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n          "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("-tf TIME_FORMAT"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("-padv PUBLISH_ADVDATA"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n          "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("-bk ADDRESS "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("BINDKEY "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("."),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("-tls ENABLE_TLS"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n          "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("-ws ENABLE_WEBSOCKET"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("-id ADDRESS "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("IRK "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("."),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n\noptional arguments:\n  -h, --help            show this "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("help")]),s._v(" message and "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exit")]),s._v("\n  -H HOST, --host HOST  MQTT "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("host")]),s._v(" address\n  -P PORT, --port PORT  MQTT "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("host")]),s._v(" port\n  -u "),e("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("USER")]),s._v(", --user "),e("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("USER")]),s._v("  MQTT username\n  -p "),e("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("PWD")]),s._v(", --pass "),e("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("PWD")]),s._v("    MQTT password\n  -pt PUB_TOPIC, --pub_topic PUB_TOPIC\n                        MQTT publish topic\n  -st SUB_TOPIC, --sub_topic SUB_TOPIC\n                        MQTT subscribe topic\n  -Lt LWT_TOPIC, --lwt_topic LWT_TOPIC\n                        MQTT LWT topic\n  -pa PUBLISH_ALL, --publish_all PUBLISH_ALL\n                        Publish all "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" or only decoded "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" advertisements "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("default:\n                        "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  -sd SCAN_DUR, --scan_duration SCAN_DUR\n                        BLE scan duration "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("seconds"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  -tb TIME_BETWEEN, --time_between TIME_BETWEEN\n                        Seconds to "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("wait")]),s._v(" between scans\n  -ll "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("DEBUG,INFO,WARNING,ERROR,CRITICAL"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(", --log_level "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("DEBUG,INFO,WARNING,ERROR,CRITICAL"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n                        TheengsGateway log level\n  -Dt DISCOVERY_TOPIC, --discovery-topic DISCOVERY_TOPIC\n                        MQTT Discovery topic\n  -D DISCOVERY, --discovery DISCOVERY\n                        Enable"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" or disable"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" MQTT discovery\n  -Dh HASS_DISCOVERY, --hass_discovery HASS_DISCOVERY\n                        Enable"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" or disable"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" Home Assistant-specific MQTT\n                        discovery "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("default: "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("                        \n  -Dn DISCOVERY_DEVICE_NAME, --discovery_name DISCOVERY_DEVICE_NAME\n                        Device name "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" Home Assistant\n  -Df DISCOVERY_FILTER "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("DISCOVERY_FILTER "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("."),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(", --discovery_filter DISCOVERY_FILTER "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("DISCOVERY_FILTER "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("."),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n                        Device discovery filter list "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" Home Assistant\n  -prt PRESENCE_TOPIC, --presence_topic PRESENCE_TOPIC\n                        MQTT topic to publish presence messages\n  -pr PUBLISH_PRESENCE, --presence PUBLISH_PRESENCE\n                        Enable "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" or disable "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" publishing presence messages\n  -a ADAPTER, --adapter ADAPTER\n                        Bluetooth adapter "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("e.g. hci1 on Linux"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  -s "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("active,passive"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(", --scanning_mode "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("active,passive"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n                        Scanning mode "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("default: active"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  -ts TIME_SYNC "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("TIME_SYNC "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("."),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(", --time_sync TIME_SYNC "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("TIME_SYNC "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("."),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n                        Addresses of Bluetooth devices to synchronize the "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("time")]),s._v("\n  -tf TIME_FORMAT, --time_format TIME_FORMAT\n                        Use "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),s._v("-hour "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" or "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("24")]),s._v("-hour "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("time")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("format")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" clocks\n                        "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("default: "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  -padv PUBLISH_ADVDATA, --publish_advdata PUBLISH_ADVDATA\n                        Publish advertising and advanced data "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" or not "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n                        "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("default: "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  -bk ADDRESS "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("BINDKEY "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("."),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(", --bindkeys ADDRESS "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("BINDKEY "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("."),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n                        Device addresses and their bindkeys: ADDR1 KEY1 ADDR2 KEY2\n  -tls ENABLE_TLS, --enable_tls ENABLE_TLS\n                        Enable "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" or disable "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" TLS "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("default: "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  -ws ENABLE_WEBSOCKET, --enable_websocket ENABLE_WEBSOCKET\n                        Enable "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" or disable "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" WebSocket "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("default: "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n  -id ADDRESS "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("IRK "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("."),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(", --identities ADDRESS "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("IRK "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("."),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n                        Identity addresses and their IRKs: ADDR1 IRK1 ADDR2 IRK2\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br"),e("span",{staticClass:"line-number"},[s._v("19")]),e("br"),e("span",{staticClass:"line-number"},[s._v("20")]),e("br"),e("span",{staticClass:"line-number"},[s._v("21")]),e("br"),e("span",{staticClass:"line-number"},[s._v("22")]),e("br"),e("span",{staticClass:"line-number"},[s._v("23")]),e("br"),e("span",{staticClass:"line-number"},[s._v("24")]),e("br"),e("span",{staticClass:"line-number"},[s._v("25")]),e("br"),e("span",{staticClass:"line-number"},[s._v("26")]),e("br"),e("span",{staticClass:"line-number"},[s._v("27")]),e("br"),e("span",{staticClass:"line-number"},[s._v("28")]),e("br"),e("span",{staticClass:"line-number"},[s._v("29")]),e("br"),e("span",{staticClass:"line-number"},[s._v("30")]),e("br"),e("span",{staticClass:"line-number"},[s._v("31")]),e("br"),e("span",{staticClass:"line-number"},[s._v("32")]),e("br"),e("span",{staticClass:"line-number"},[s._v("33")]),e("br"),e("span",{staticClass:"line-number"},[s._v("34")]),e("br"),e("span",{staticClass:"line-number"},[s._v("35")]),e("br"),e("span",{staticClass:"line-number"},[s._v("36")]),e("br"),e("span",{staticClass:"line-number"},[s._v("37")]),e("br"),e("span",{staticClass:"line-number"},[s._v("38")]),e("br"),e("span",{staticClass:"line-number"},[s._v("39")]),e("br"),e("span",{staticClass:"line-number"},[s._v("40")]),e("br"),e("span",{staticClass:"line-number"},[s._v("41")]),e("br"),e("span",{staticClass:"line-number"},[s._v("42")]),e("br"),e("span",{staticClass:"line-number"},[s._v("43")]),e("br"),e("span",{staticClass:"line-number"},[s._v("44")]),e("br"),e("span",{staticClass:"line-number"},[s._v("45")]),e("br"),e("span",{staticClass:"line-number"},[s._v("46")]),e("br"),e("span",{staticClass:"line-number"},[s._v("47")]),e("br"),e("span",{staticClass:"line-number"},[s._v("48")]),e("br"),e("span",{staticClass:"line-number"},[s._v("49")]),e("br"),e("span",{staticClass:"line-number"},[s._v("50")]),e("br"),e("span",{staticClass:"line-number"},[s._v("51")]),e("br"),e("span",{staticClass:"line-number"},[s._v("52")]),e("br"),e("span",{staticClass:"line-number"},[s._v("53")]),e("br"),e("span",{staticClass:"line-number"},[s._v("54")]),e("br"),e("span",{staticClass:"line-number"},[s._v("55")]),e("br"),e("span",{staticClass:"line-number"},[s._v("56")]),e("br"),e("span",{staticClass:"line-number"},[s._v("57")]),e("br"),e("span",{staticClass:"line-number"},[s._v("58")]),e("br"),e("span",{staticClass:"line-number"},[s._v("59")]),e("br"),e("span",{staticClass:"line-number"},[s._v("60")]),e("br"),e("span",{staticClass:"line-number"},[s._v("61")]),e("br"),e("span",{staticClass:"line-number"},[s._v("62")]),e("br"),e("span",{staticClass:"line-number"},[s._v("63")]),e("br"),e("span",{staticClass:"line-number"},[s._v("64")]),e("br"),e("span",{staticClass:"line-number"},[s._v("65")]),e("br"),e("span",{staticClass:"line-number"},[s._v("66")]),e("br"),e("span",{staticClass:"line-number"},[s._v("67")]),e("br")])]),e("h3",{attrs:{id:"for-a-docker-container-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#for-a-docker-container-2"}},[s._v("#")]),s._v(" For a Docker container")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" run --rm "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    --network "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("host")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    -e "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("MQTT_HOST")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("host_ip"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    -e "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("MQTT_USERNAME")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("username"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    -e "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("MQTT_PASSWORD")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("password"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    -e "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("MQTT_PUB_TOPIC")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("home/TheengsGateway/BTtoMQTT "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    -e "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("MQTT_SUB_TOPIC")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("home/+/BTtoMQTT/undecoded "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    -e "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("PUBLISH_ALL")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    -e "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("TIME_BETWEEN")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("60")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    -e "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("SCAN_TIME")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("60")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    -e "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("LOG_LEVEL")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("INFO "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    -e "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("HAAS_DISCOVERY")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    -e "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("DISCOVERY")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    -e "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("DISCOVERY_TOPIC")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("homeassistant "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    -e "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("DISCOVERY_DEVICE_NAME")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("TheengsGateway "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    -e "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("DISCOVERY_FILTER")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"[IBEACON,GAEN,MS-CDP,APPLE_CONT,APPLE_CONTAT]"')]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    -e "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("SCANNING_MODE")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("active "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    -e "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ADAPTER")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("hci0 "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    -v /var/run/dbus:/var/run/dbus "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    --name TheengsGateway "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    theengs/gateway\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br"),e("span",{staticClass:"line-number"},[s._v("19")]),e("br"),e("span",{staticClass:"line-number"},[s._v("20")]),e("br"),e("span",{staticClass:"line-number"},[s._v("21")]),e("br")])]),e("h2",{attrs:{id:"publish-to-a-2-levels-topic"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#publish-to-a-2-levels-topic"}},[s._v("#")]),s._v(" Publish to a 2 levels topic")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("python -m TheengsGateway -H "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"192.168.1.17"')]),s._v(" -u "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"username"')]),s._v(" -p "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"password"')]),s._v(" -pt "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"home/TheengsGateway"')]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h2",{attrs:{id:"scan-every-55s"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#scan-every-55s"}},[s._v("#")]),s._v(" Scan every 55s")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("python -m TheengsGateway -H "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"192.168.1.17"')]),s._v(" -u "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"username"')]),s._v(" -p "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"password"')]),s._v(" -pt "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"home/TheengsGateway"')]),s._v(" -tb "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("55")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h2",{attrs:{id:"configuration-record"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#configuration-record"}},[s._v("#")]),s._v(" Configuration record")]),s._v(" "),e("p",[s._v("Once you have entered your credentials and parameters they are saved into a configuration file "),e("code",[s._v("theengsgw.conf")]),s._v(" into your user directory and you can simply launch the gateway by using:")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[s._v("python -m TheengsGateway\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h2",{attrs:{id:"mqtttomqtt-decoding"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#mqtttomqtt-decoding"}},[s._v("#")]),s._v(" MQTTtoMQTT decoding")]),s._v(" "),e("p",[s._v("Messages sent to the subscribe topic can be used for decoding BLE data and will be published to the publish topic. This allows for offloading the decode operation from other devices, such as an ESP32, to enhance performance.")]),s._v(" "),e("p",[s._v('The data sent to the topic is expected to be formatted in JSON and MUST have at least an "id" entry.')]),s._v(" "),e("p",[s._v("Example message:")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('{\n  "id":"54:94:5E:9F:64:C4",\n  "mac_type":1,\n  "manufacturerdata":"4c0010060319247bbc68",\n  "rssi":-74,\n  "txpower":12\n}\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br")])]),e("p",[s._v("If possible, the data will be decoded and published.")]),s._v(" "),e("p",[e("a",{attrs:{href:"https://docs.openmqttgateway.com/",target:"_blank",rel:"noopener noreferrer"}},[s._v("OpenMQTTGateway"),e("OutboundLink")],1),s._v(", proposes a "),e("a",{attrs:{href:"https://docs.openmqttgateway.com/upload/web-install.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("web upload"),e("OutboundLink")],1),s._v(" binary "),e("code",[s._v("esp32dev-ble-mqtt-undecoded")]),s._v(" that will publish directly to 'home/"),e("gateway",{attrs:{name:""}},[s._v("/BTtoMQTT` making it directly compatible with Theengs Gateway MQTTtoMQTT decoding feature.")])],1),s._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[s._v("TIP")]),s._v(" "),e("p",[s._v("By default Theengs Gateway will listen to "),e("code",[s._v("home/+/BTtoMQTT/undecoded")]),s._v(", if you have several ESP32 gateways with OpenMQTTGateway undecoded, Theengs will pickup all of them and centralize the decoded BT sensor data in one place.")])]),s._v(" "),e("h2",{attrs:{id:"home-assistant-auto-discovery"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#home-assistant-auto-discovery"}},[s._v("#")]),s._v(" Home Assistant auto discovery")]),s._v(" "),e("p",[s._v("If enabled (default), decoded devices will publish their configuration to Home Assistant to be discovered.")]),s._v(" "),e("ul",[e("li",[s._v("This can be enabled/disabled with the "),e("code",[s._v("-D")]),s._v(" or "),e("code",[s._v("--discovery")]),s._v(" command line argument with a value of 1 (enable) or 0 (disable).")]),s._v(" "),e("li",[s._v("If you want to use Home Assistant discovery with other home automation gateways such as openHAB, set "),e("code",[s._v("-Dh")]),s._v(" or "),e("code",[s._v("--hass_discovery")]),s._v(" to 0 (disable).")]),s._v(" "),e("li",[s._v("The discovery topic can be set with the "),e("code",[s._v("-Dt")]),s._v(" or "),e("code",[s._v("--discovery_topic")]),s._v(" command line argument.")]),s._v(" "),e("li",[s._v("The discovery name can be set wit the "),e("code",[s._v("-Dn")]),s._v(" or "),e("code",[s._v("--discovery_name")]),s._v(" command line argument.")]),s._v(" "),e("li",[s._v("Devices can be filtered from discovery with the "),e("code",[s._v("-Df")]),s._v(" or "),e("code",[s._v("--discovery_filter")]),s._v(' argument which takes a list of device "model_id" to be filtered.')])]),s._v(" "),e("p",[s._v("The "),e("code",[s._v("IBEACON")]),s._v(" and random MAC devices (APPLE, MS-CDP and GAEN) are not discovered as their addresses (IDs) change over time resulting in multiple discoveries.")]),s._v(" "),e("h2",{attrs:{id:"passive-scanning"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#passive-scanning"}},[s._v("#")]),s._v(" Passive scanning")]),s._v(" "),e("p",[s._v("Passive scanning ("),e("code",[s._v("-s passive")]),s._v(" or "),e("code",[s._v("--scanning_mode passive")]),s._v(") only works on Windows or Linux kernel >= 5.10 and BlueZ >= 5.56 with experimental features enabled.")]),s._v(" "),e("p",[s._v("To enable experimental features in BlueZ on a Linux distribution that uses systemd, run the following command:")]),s._v(" "),e("div",{staticClass:"language-shell line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" systemctl edit bluetooth.service\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("Then add the following lines:")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("[Service]\nExecStart=\nExecStart=/usr/lib/bluetooth/bluetoothd --experimental\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("p",[s._v("Save and close the file and then run the following commands:")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("sudo systemctl daemon-reload\nsudo systemctl restart bluetooth.service\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("h2",{attrs:{id:"time-synchronization"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#time-synchronization"}},[s._v("#")]),s._v(" Time synchronization")]),s._v(" "),e("p",[s._v("If you have specified the MAC addresses of "),e("a",{attrs:{href:"https://bluetooth-clocks.readthedocs.io/en/latest/devices.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("supported Bluetooth clocks"),e("OutboundLink")],1),s._v(" with the "),e("code",[s._v("--time_sync")]),s._v(" argument, Theengs Gateway automatically synchronizes their time once a day. Therefore, make sure that your gateway's time is set correctly.")]),s._v(" "),e("p",[s._v("Some Bluetooth clocks let you choose between 12-hour (AM/PM) and 24-hour format to show their time. Use the argument "),e("code",[s._v("--time_format 0")]),s._v(" (default) for 24-hour format and "),e("code",[s._v("--time_format 1")]),s._v(" for 12-hour format.")]),s._v(" "),e("p",[s._v("Note that the first time synchronization of each specified clock will happen at a random time in the next day. This way the connections to these devices will be spaced out in time. After this first time synchronization, Theengs Gateway will synchronize its time every 24 hours.")]),s._v(" "),e("p",[s._v("If a device isn't recognized as a supported clock, Theengs Gateway won't try to synchronize its time ever. But if there are other errors, such as connection errors or write errors (which could be temporary), the device will still be tried every 24 hours.")]),s._v(" "),e("p",[s._v("If you want to know which of your devices are supported by Theengs Gateway's time synchronization feature, run the following command:")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("bluetooth-clocks discover\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("The "),e("code",[s._v("bluetooth-clocks")]),s._v(" command is installed as part of Theengs Gateway.")]),s._v(" "),e("h2",{attrs:{id:"reading-encrypted-advertisements"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#reading-encrypted-advertisements"}},[s._v("#")]),s._v(" Reading encrypted advertisements")]),s._v(" "),e("p",[s._v("If you want to read encrypted advertisements, you need to add a bindkey for each device address with the "),e("code",[s._v("--bindkeys")]),s._v(" argument. For example:")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("TheengsGateway --bindkeys 00:11:22:33:44:55:66 0dc540f3025b474b9ef1085e051b1add AA:BB:CC:DD:EE:FF 6385424e1b0341109942ad2a6bb42e58\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("Theengs Gateway will then use the bindkey 0dc540f3025b474b9ef1085e051b1add to decrypt all advertisements from device 00:11:22:33:44:55:66 and bindkey 6385424e1b0341109942ad2a6bb42e58 for all advertisements from device AA:BB:CC:DD:EE:FF.")]),s._v(" "),e("h2",{attrs:{id:"resolving-random-private-addresses"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#resolving-random-private-addresses"}},[s._v("#")]),s._v(" Resolving random private addresses")]),s._v(" "),e("p",[s._v("If you want to resolve random private addresses into a device's identity address, you need to add an identity resolving key (IRK) for each identity address with the "),e("code",[s._v("--identities")]),s._v(" argument. For example:")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("TheengsGateway --identities 00:11:22:33:44:55:66 0dc540f3025b474b9ef1085e051b1add AA:BB:CC:DD:EE:FF 6385424e1b0341109942ad2a6bb42e58\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("Theengs Gateway will then use the identity resolving key 0dc540f3025b474b9ef1085e051b1add to resolve random private addresses from device 00:11:22:33:44:55:66 and identity resolving key 6385424e1b0341109942ad2a6bb42e58 to resolve random private addresses from device AA:BB:CC:DD:EE:FF.")]),s._v(" "),e("p",[s._v("The identity resolving key can also be specified as a Base64 encoded string, such as "),e("code",[s._v('"MGRjNTQwZjMwMjViNDc0YjllZjEwODVlMDUxYjFhZGQ="')]),s._v(".")])])}),[],!1,null,null,null);t.default=n.exports}}]);